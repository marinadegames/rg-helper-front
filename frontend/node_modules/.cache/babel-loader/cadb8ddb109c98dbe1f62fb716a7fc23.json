{"ast":null,"code":"var _jsxFileName = \"D:\\\\projects\\\\temp\\\\frontend\\\\src\\\\Components\\\\add-patient\\\\AddPatient.tsx\",\n    _s = $RefreshSig$();\n\nimport s from './AddPatient.module.css';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { memo, useCallback, useState } from \"react\";\nimport { AddPatientTC } from \"../../Redux/patientsReducer\";\nimport { TypeResearchComponent } from \"./TypeResearchComponent\";\nimport { v1 } from \"uuid\";\nimport { Button } from \"../universal components/Button\";\nimport { formatDate } from \"../../Utils/formatDate\";\nimport { setErrorMessageTC, setSuccessfulMessageTC } from \"../../Redux/appReducer\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const AddPatient = /*#__PURE__*/_s( /*#__PURE__*/memo(_c = _s(() => {\n  _s();\n\n  // state\n  const nextId = useSelector(state => state.patients.patients.length);\n  const [name, setName] = useState('');\n  const [year, setYear] = useState(1900);\n  const [sex, setSex] = useState('');\n  const [address, setAddress] = useState('');\n  const [researches, setResearches] = useState([]);\n  const dispatch = useDispatch();\n  console.table(researches); // functional\n\n  const addRes = () => {\n    const newId = v1();\n    const newRes = {\n      idRes: newId,\n      typeRes: '',\n      sizeFilm: '',\n      amount: 0,\n      projections: 0,\n      dose: 0\n    };\n    setResearches([...researches, newRes]);\n  };\n\n  const deleteRes = id => setResearches(researches.filter(res => res.idRes !== id));\n\n  const changeName = e => setName(e);\n\n  const changeYear = e => setYear(e);\n\n  const changeSex = sex => setSex(sex);\n\n  const changeAddress = e => setAddress(e);\n\n  const selectTypeRes = useCallback((value, idTarget) => {\n    setResearches(researches.map(res => res.idRes === idTarget ? { ...res,\n      typeRes: value\n    } : res));\n  }, [researches]);\n\n  const selectXrayFilm = (value, id) => {\n    setResearches(researches.map(res => res.idRes === id ? { ...res,\n      sizeFilm: value\n    } : res));\n  };\n\n  const selectAmount = (num, id) => {\n    setResearches(researches.map(res => res.idRes === id ? { ...res,\n      amount: num\n    } : res));\n  };\n\n  const selectProjections = (num, id) => {\n    setResearches(researches.map(res => res.idRes === id ? { ...res,\n      projections: num\n    } : res));\n  };\n\n  const selectDose = (num, id) => {\n    setResearches(researches.map(res => res.idRes === id ? { ...res,\n      dose: num\n    } : res));\n  };\n\n  const addPatient = () => {\n    const payload = {\n      id: nextId + 1,\n      name,\n      year,\n      sex,\n      address: address,\n      researches: researches,\n      dateOfReceipt: new Date(),\n      description: '',\n      conclusion: ''\n    };\n\n    if (name.length > 0 && sex.length > 0 && address.length > 0) {\n      dispatch(AddPatientTC(payload));\n      dispatch(setSuccessfulMessageTC('Пациент успешно добавлен!')); // clear inputs\n\n      setName('');\n      setYear(1900);\n      setSex('');\n      setAddress('');\n      setResearches([]);\n    } else {\n      dispatch(setErrorMessageTC('Проверьте правильность введенных данных!'));\n    }\n  };\n\n  const addError = () => {\n    dispatch(setErrorMessageTC('MESSAGE ERROR TEST'));\n  };\n\n  const addSuccessful = () => {\n    dispatch(setSuccessfulMessageTC('ТЕСТ УСПЕШНОГО УСПЕХА!'));\n  };\n\n  const date = formatDate(new Date()); // JSX\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: s.add_patients,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: s.header_add_patients,\n      children: [\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435 \\u043D\\u043E\\u0432\\u043E\\u0433\\u043E \\u043F\\u0430\\u0446\\u0438\\u0435\\u043D\\u0442\\u0430:\", /*#__PURE__*/_jsxDEV(\"div\", {\n        className: 'flex flex-row justify-center items-center cursor-pointer',\n        children: date\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: s.add_patient_element,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: s.name_field,\n        children: \"\\u041D\\u043E\\u043C\\u0435\\u0440 \\u0441\\u043D\\u0438\\u043C\\u043A\\u0430:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: s.name_field,\n        children: nextId + 1\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: s.add_patient_element,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: s.name_field,\n        children: \"\\u0424\\u0418\\u041E:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: s.input_add_pat,\n        id: 'name',\n        name: 'name',\n        type: 'text',\n        placeholder: 'ИМЯ',\n        value: name,\n        onChange: e => changeName(e.currentTarget.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: s.add_patient_element,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: s.name_field,\n        children: \"\\u0413\\u043E\\u0434:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: s.input_add_pat,\n        placeholder: 'ГОД',\n        id: 'year',\n        min: 1900,\n        max: 2100,\n        type: \"number\",\n        name: 'year',\n        value: year,\n        onChange: e => changeYear(e.currentTarget.valueAsNumber)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: s.add_patient_element,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: s.name_field,\n        children: \"\\u041F\\u043E\\u043B:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: 'mr-3',\n        children: \"\\u041C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: s.input_add_pat_radio,\n        type: 'radio',\n        name: 'sex',\n        value: 'Ж',\n        onChange: e => changeSex(e.currentTarget.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: 'mr-3',\n        children: \"\\u0416\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: s.input_add_pat_radio,\n        type: 'radio',\n        name: 'sex',\n        value: 'М',\n        onChange: e => changeSex(e.currentTarget.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: s.add_patient_element,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: s.name_field,\n        children: \"\\u0410\\u0434\\u0440\\u0435\\u0441:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: s.input_add_pat,\n        placeholder: 'Адрес',\n        id: 'adress',\n        name: 'adress',\n        value: address,\n        onChange: e => changeAddress(e.currentTarget.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: s.box,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: 'flex flex-row',\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: s.name_field,\n          children: \"\\u0418\\u0441\\u0441\\u043B\\u0435\\u0434\\u043E\\u0432\\u0430\\u043D\\u0438\\u044F:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: addRes,\n          title: 'Добавить'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: 'flex flex-col my-4 ',\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"table w-full \",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"table-header-group ...\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"table-row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"table-cell w-1/6 font-bold p-2 text-center border border-gray-400 text-left\",\n              children: \"\\u0422\\u0438\\u043F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 187,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"table-cell w-1/6 font-bold p-2 text-center border border-gray-400 text-left\",\n              children: \"\\u041F\\u043B\\u0435\\u043D\\u043A\\u0430\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 190,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"table-cell w-1/6 font-bold p-2 text-center border border-gray-400 text-left\",\n              children: \"\\u041A\\u043E\\u043B-\\u0432\\u043E\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"table-cell w-1/6 font-bold p-2 text-center border border-gray-400 text-left\",\n              children: \"\\u041F\\u0440\\u043E\\u0435\\u043A\\u0446\\u0438\\u0439\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 196,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"table-cell w-1/6 font-bold p-2 text-center border border-gray-400 text-left\",\n              children: \"\\u0414\\u043E\\u0437\\u0430, \\u043C\\u0417\\u0432\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 199,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"table-cell w-1/12 font-bold p-2 text-center border border-gray-400 text-left\",\n              children: \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 203,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 25\n        }, this), researches.map(res => {\n          return /*#__PURE__*/_jsxDEV(TypeResearchComponent, {\n            id: res.idRes,\n            deleteRes: deleteRes,\n            selectTypeRes: selectTypeRes,\n            selectXrayFilm: selectXrayFilm,\n            selectAmount: selectAmount,\n            selectProjections: selectProjections,\n            selectDose: selectDose\n          }, res.idRes, false, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 33\n          }, this);\n        })]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      title: 'Добавить пациента',\n      onClick: addPatient\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      title: 'Сгенерировать ошибку',\n      onClick: addError\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      title: 'Сгенерировать успешность',\n      onClick: addSuccessful\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 103,\n    columnNumber: 13\n  }, this);\n}, \"74V+DPEIgzSER2yXl/te5hLFWGE=\", false, function () {\n  return [useSelector, useDispatch];\n})), \"74V+DPEIgzSER2yXl/te5hLFWGE=\", false, function () {\n  return [useSelector, useDispatch];\n});\n_c2 = AddPatient;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"AddPatient$memo\");\n$RefreshReg$(_c2, \"AddPatient\");","map":{"version":3,"sources":["D:/projects/temp/frontend/src/Components/add-patient/AddPatient.tsx"],"names":["s","useDispatch","useSelector","memo","useCallback","useState","AddPatientTC","TypeResearchComponent","v1","Button","formatDate","setErrorMessageTC","setSuccessfulMessageTC","AddPatient","nextId","state","patients","length","name","setName","year","setYear","sex","setSex","address","setAddress","researches","setResearches","dispatch","console","table","addRes","newId","newRes","idRes","typeRes","sizeFilm","amount","projections","dose","deleteRes","id","filter","res","changeName","e","changeYear","changeSex","changeAddress","selectTypeRes","value","idTarget","map","selectXrayFilm","selectAmount","num","selectProjections","selectDose","addPatient","payload","dateOfReceipt","Date","description","conclusion","addError","addSuccessful","date","add_patients","header_add_patients","add_patient_element","name_field","input_add_pat","currentTarget","valueAsNumber","input_add_pat_radio","box"],"mappings":"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","sourcesContent":["import s from './AddPatient.module.css'\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {rootReducerType} from \"../../Redux/state\";\r\nimport {memo, useCallback, useState} from \"react\";\r\nimport {AddPatientTC, PatientType, ResearchesType} from \"../../Redux/patientsReducer\";\r\nimport {TypeResearchComponent} from \"./TypeResearchComponent\";\r\nimport {v1} from \"uuid\";\r\nimport {Button} from \"../universal components/Button\";\r\nimport {formatDate} from \"../../Utils/formatDate\";\r\nimport {setErrorMessageTC, setSuccessfulMessageTC,} from \"../../Redux/appReducer\";\r\nimport {debug} from \"util\";\r\n\r\n\r\nexport const AddPatient = memo(() => {\r\n\r\n        // state\r\n        const nextId = useSelector<rootReducerType, number>(state => state.patients.patients.length)\r\n        const [name, setName] = useState<string>('')\r\n        const [year, setYear] = useState<number>(1900)\r\n        const [sex, setSex] = useState<string>('')\r\n        const [address, setAddress] = useState<string>('')\r\n        const [researches, setResearches] = useState<Array<ResearchesType>>([])\r\n        const dispatch = useDispatch()\r\n\r\n        console.table(researches)\r\n\r\n        // functional\r\n        const addRes = () => {\r\n            const newId = v1()\r\n            const newRes = {\r\n                idRes: newId,\r\n                typeRes: '',\r\n                sizeFilm: '',\r\n                amount: 0,\r\n                projections: 0,\r\n                dose: 0,\r\n            } as ResearchesType\r\n\r\n            setResearches(\r\n                [...researches, newRes]\r\n            )\r\n        }\r\n        const deleteRes = (id: string) => setResearches(researches.filter(res => res.idRes !== id))\r\n        const changeName = (e: string) => setName(e)\r\n        const changeYear = (e: number) => setYear(e)\r\n        const changeSex = (sex: string) => setSex(sex)\r\n        const changeAddress = (e: string) => setAddress(e)\r\n\r\n        const selectTypeRes = useCallback((value: string, idTarget: string) => {\r\n            setResearches(researches.map(res => res.idRes === idTarget ? {...res, typeRes: value} : res))\r\n        }, [researches])\r\n\r\n        const selectXrayFilm = (value: string, id: string) => {\r\n            setResearches(researches.map(res => res.idRes === id ? ({...res, sizeFilm: value}) : res))\r\n        }\r\n        const selectAmount = (num: number, id: string) => {\r\n            setResearches(researches.map(res => res.idRes === id ? {...res, amount: num} : res))\r\n        }\r\n        const selectProjections = (num: number, id: string) => {\r\n            setResearches(researches.map(res => res.idRes === id ? {...res, projections: num} : res))\r\n        }\r\n        const selectDose = (num: number, id: string) => {\r\n            setResearches(researches.map(res => res.idRes === id ? {...res, dose: num} : res))\r\n        }\r\n        const addPatient = () => {\r\n            const payload: PatientType = {\r\n                id: nextId + 1,\r\n                name,\r\n                year,\r\n                sex,\r\n                address: address,\r\n                researches: researches,\r\n                dateOfReceipt: new Date(),\r\n                description: '',\r\n                conclusion: '',\r\n            }\r\n            if (name.length > 0 && sex.length > 0 && address.length > 0) {\r\n                dispatch(AddPatientTC(payload))\r\n                dispatch(setSuccessfulMessageTC('Пациент успешно добавлен!'))\r\n                // clear inputs\r\n                setName('')\r\n                setYear(1900)\r\n                setSex('')\r\n                setAddress('')\r\n                setResearches([])\r\n            } else {\r\n                dispatch(setErrorMessageTC('Проверьте правильность введенных данных!'))\r\n            }\r\n        }\r\n\r\n        const addError = () => {\r\n            dispatch(setErrorMessageTC('MESSAGE ERROR TEST'))\r\n        }\r\n        const addSuccessful = () => {\r\n            dispatch(setSuccessfulMessageTC('ТЕСТ УСПЕШНОГО УСПЕХА!'))\r\n        }\r\n\r\n        const date = formatDate(new Date())\r\n\r\n\r\n        // JSX\r\n        return (\r\n            <div className={s.add_patients}>\r\n                <div className={s.header_add_patients}>\r\n\r\n                    Добавление нового пациента:\r\n                    <div className={'flex flex-row justify-center items-center cursor-pointer'}>\r\n                        {date}\r\n                    </div>\r\n                </div>\r\n                {/* ID */}\r\n                <div className={s.add_patient_element}>\r\n                    <div className={s.name_field}>Номер снимка:</div>\r\n                    <div className={s.name_field}>{nextId + 1}</div>\r\n                </div>\r\n\r\n                {/* NAME */}\r\n                <div className={s.add_patient_element}>\r\n                    <div className={s.name_field}>ФИО:</div>\r\n                    <input className={s.input_add_pat}\r\n                           id={'name'}\r\n                           name={'name'}\r\n                           type={'text'}\r\n                           placeholder={'ИМЯ'}\r\n                           value={name}\r\n                           onChange={e => changeName(e.currentTarget.value)}\r\n                    />\r\n                </div>\r\n\r\n                {/* YEAR */}\r\n                <div className={s.add_patient_element}>\r\n                    <div className={s.name_field}>Год:</div>\r\n                    <input className={s.input_add_pat}\r\n                           placeholder={'ГОД'}\r\n                           id={'year'}\r\n                           min={1900}\r\n                           max={2100}\r\n                           type={\"number\"}\r\n                           name={'year'}\r\n                           value={year}\r\n                           onChange={e => changeYear(e.currentTarget.valueAsNumber)}\r\n                    />\r\n                </div>\r\n\r\n                {/* SEX */}\r\n                <div className={s.add_patient_element}>\r\n                    <div className={s.name_field}>Пол:</div>\r\n                    <div className={'mr-3'}>М</div>\r\n                    <input className={s.input_add_pat_radio}\r\n                           type={'radio'}\r\n                           name={'sex'}\r\n                           value={'Ж'}\r\n                           onChange={e => changeSex(e.currentTarget.value)}\r\n                    />\r\n                    <div className={'mr-3'}>Ж</div>\r\n                    <input className={s.input_add_pat_radio}\r\n                           type={'radio'}\r\n                           name={'sex'}\r\n                           value={'М'}\r\n                           onChange={e => changeSex(e.currentTarget.value)}\r\n                    />\r\n                </div>\r\n\r\n                {/* ADRESS */}\r\n                <div className={s.add_patient_element}>\r\n                    <div className={s.name_field}>Адрес:</div>\r\n                    <input className={s.input_add_pat}\r\n                           placeholder={'Адрес'}\r\n                           id={'adress'}\r\n                           name={'adress'}\r\n                           value={address}\r\n                           onChange={e => changeAddress(e.currentTarget.value)}\r\n                    />\r\n                </div>\r\n\r\n                {/* Тип исследования: */}\r\n                <div className={s.box}>\r\n                    <div className={'flex flex-row'}>\r\n                        <div className={s.name_field}>Исследования:</div>\r\n                        <Button onClick={addRes} title={'Добавить'}/>\r\n                    </div>\r\n                </div>\r\n                <div className={'flex flex-col my-4 '}>\r\n                    <div className=\"table w-full \">\r\n                        <div className=\"table-header-group ...\">\r\n                            <div className=\"table-row\">\r\n                                <div\r\n                                    className=\"table-cell w-1/6 font-bold p-2 text-center border border-gray-400 text-left\">Тип\r\n                                </div>\r\n                                <div\r\n                                    className=\"table-cell w-1/6 font-bold p-2 text-center border border-gray-400 text-left\">Пленка\r\n                                </div>\r\n                                <div\r\n                                    className=\"table-cell w-1/6 font-bold p-2 text-center border border-gray-400 text-left\">Кол-во\r\n                                </div>\r\n                                <div\r\n                                    className=\"table-cell w-1/6 font-bold p-2 text-center border border-gray-400 text-left\">Проекций\r\n                                </div>\r\n                                <div\r\n                                    className=\"table-cell w-1/6 font-bold p-2 text-center border border-gray-400 text-left\">Доза,\r\n                                    мЗв\r\n                                </div>\r\n                                <div\r\n                                    className=\"table-cell w-1/12 font-bold p-2 text-center border border-gray-400 text-left\">Удалить\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        {researches.map(res => {\r\n                            return (\r\n                                <TypeResearchComponent\r\n                                    key={res.idRes}\r\n                                    id={res.idRes}\r\n                                    deleteRes={deleteRes}\r\n                                    selectTypeRes={selectTypeRes}\r\n                                    selectXrayFilm={selectXrayFilm}\r\n                                    selectAmount={selectAmount}\r\n                                    selectProjections={selectProjections}\r\n                                    selectDose={selectDose}\r\n                                />\r\n                            )\r\n                        })}\r\n                    </div>\r\n                </div>\r\n                <Button title={'Добавить пациента'} onClick={addPatient}/>\r\n                <Button title={'Сгенерировать ошибку'} onClick={addError}/>\r\n                <Button title={'Сгенерировать успешность'} onClick={addSuccessful}/>\r\n            </div>\r\n        )\r\n    }\r\n)"]},"metadata":{},"sourceType":"module"}